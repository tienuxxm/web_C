{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://171.244.205.210:8500/app/api/';\n\n// Helper function to get fresh token\nconst getAuthToken = () => {\n  const token = localStorage.getItem('access_token');\n  return token ? token.slice(1, -1) : null;\n};\n\n// Base config\nconst getBaseConfig = () => ({\n  headers: {\n    Accept: 'application/json',\n    ...(getAuthToken() && {\n      Authorization: `Bearer ${getAuthToken()}`\n    })\n  }\n});\n\n// Response interceptor\naxios.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.clear();\n    window.location.href = '/';\n  }\n  return Promise.reject(error);\n});\nexport const getApi = async endpoint => {\n  try {\n    const response = await axios.get(`${API_URL}${endpoint}`, getBaseConfig());\n    return response.data;\n  } catch (error) {\n    console.error(\"GET Error:\", error);\n    throw error; // Or return { error: error.message }\n  }\n};\n\nexport const postApi = async (endpoint, data) => {\n  try {\n    const response = await axios.post(`${API_URL}${endpoint}`, data, getBaseConfig());\n    return response.data;\n  } catch (error) {\n    console.error(\"POST Error:\", error);\n    throw error;\n  }\n};\n\n// If you really need two POST versions, give them more descriptive names\nexport const postApiWithPlainText = async (endpoint, data) => {\n  try {\n    const response = await axios.post(`${API_URL}${endpoint}`, data, {\n      ...getBaseConfig(),\n      headers: {\n        ...getBaseConfig().headers,\n        Accept: 'text/html, application/json, text/plain, */*'\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"POST Error:\", error);\n    throw error;\n  }\n};\n\n// import axios from 'axios';\n// const API_URL='http://171.244.205.210:8500/app/api/';\n// const token = localStorage.getItem('access_token');\n\n// const config = {\n//   headers: {\n//     Accept: 'application/json',\n//     Authorization: `Bearer ${token ?  token.slice(1, -1) : \"\"}`,\n//   }\n// };\n\n// export const getApi = async (endpoint) => {\n//   try {\n//     const res = await axios.get(`${API_URL}${endpoint}`, config);\n//     return res.data\n//   } catch (error){\n//     console.log(\"Error API\", error.message)\n//   }\n// };\n\n// export const postApi = async (endpoint, data) => {\n//   try {\n//     let res = await axios({ method: 'POST'\n//                           , url:`${API_URL}${endpoint}`\n//                           , data: data\n//                           , headers: { Accept: 'text/html, application/json, text/plain, */*' }}) \n//     return res.data\n//   } catch (error) {\n//     console.log(\"Error API\", error.message);\n//   }\n// };\n\n// export const postApiv1 = async (endpoint, data) => {\n//   try {\n//     let res = await axios({ method: 'POST'\n//                           , url:`${API_URL}${endpoint}`\n//                           , data: data\n//                           , headers: { Accept: 'application/json', Authorization: `Bearer ${token ?  token.slice(1, -1) : \"\"}`,}\n//                           }) \n//     return res.data\n//   } catch (error) {\n//     console.log(\"Error API\", error.message);\n//   }\n// };\n\n// axios.interceptors.response.use(\n//   response => response,\n//   error => {\n//     if (error.response?.status === 401) {\n//       localStorage.clear();\n//       window.location.href = '/';\n//     }\n//     return Promise.reject(error);\n//   }\n// );\n// */","map":{"version":3,"names":["axios","API_URL","getAuthToken","token","localStorage","getItem","slice","getBaseConfig","headers","Accept","Authorization","interceptors","response","use","error","status","clear","window","location","href","Promise","reject","getApi","endpoint","get","data","console","postApi","post","postApiWithPlainText"],"sources":["E:/WebBitex/order-purchasing/src/api/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://171.244.205.210:8500/app/api/';\n\n// Helper function to get fresh token\nconst getAuthToken = () => {\n  const token = localStorage.getItem('access_token');\n  return token ? token.slice(1, -1) : null;\n};\n\n// Base config\nconst getBaseConfig = () => ({\n  headers: {\n    Accept: 'application/json',\n    ...(getAuthToken() && { Authorization: `Bearer ${getAuthToken()}` }),\n  }\n});\n\n// Response interceptor\naxios.interceptors.response.use(\n  response => response,\n  error => {\n    if (error.response?.status === 401) {\n      localStorage.clear();\n      window.location.href = '/';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const getApi = async (endpoint) => {\n  try {\n    const response = await axios.get(`${API_URL}${endpoint}`, getBaseConfig());\n    return response.data;\n  } catch (error) {\n    console.error(\"GET Error:\", error);\n    throw error; // Or return { error: error.message }\n  }\n};\n\nexport const postApi = async (endpoint, data) => {\n  try {\n    const response = await axios.post(\n      `${API_URL}${endpoint}`,\n      data,\n      getBaseConfig()\n    );\n    return response.data;\n  } catch (error) {\n    console.error(\"POST Error:\", error);\n    throw error;\n  }\n};\n\n// If you really need two POST versions, give them more descriptive names\nexport const postApiWithPlainText = async (endpoint, data) => {\n  try {\n    const response = await axios.post(\n      `${API_URL}${endpoint}`,\n      data,\n      {\n        ...getBaseConfig(),\n        headers: {\n          ...getBaseConfig().headers,\n          Accept: 'text/html, application/json, text/plain, */*'\n        }\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error(\"POST Error:\", error);\n    throw error;\n  }\n};\n\n// import axios from 'axios';\n// const API_URL='http://171.244.205.210:8500/app/api/';\n// const token = localStorage.getItem('access_token');\n\n// const config = {\n//   headers: {\n//     Accept: 'application/json',\n//     Authorization: `Bearer ${token ?  token.slice(1, -1) : \"\"}`,\n//   }\n// };\n\n// export const getApi = async (endpoint) => {\n//   try {\n//     const res = await axios.get(`${API_URL}${endpoint}`, config);\n//     return res.data\n//   } catch (error){\n//     console.log(\"Error API\", error.message)\n//   }\n// };\n\n// export const postApi = async (endpoint, data) => {\n//   try {\n//     let res = await axios({ method: 'POST'\n//                           , url:`${API_URL}${endpoint}`\n//                           , data: data\n//                           , headers: { Accept: 'text/html, application/json, text/plain, */*' }}) \n//     return res.data\n//   } catch (error) {\n//     console.log(\"Error API\", error.message);\n//   }\n// };\n\n// export const postApiv1 = async (endpoint, data) => {\n//   try {\n//     let res = await axios({ method: 'POST'\n//                           , url:`${API_URL}${endpoint}`\n//                           , data: data\n//                           , headers: { Accept: 'application/json', Authorization: `Bearer ${token ?  token.slice(1, -1) : \"\"}`,}\n//                           }) \n//     return res.data\n//   } catch (error) {\n//     console.log(\"Error API\", error.message);\n//   }\n// };\n\n// axios.interceptors.response.use(\n//   response => response,\n//   error => {\n//     if (error.response?.status === 401) {\n//       localStorage.clear();\n//       window.location.href = '/';\n//     }\n//     return Promise.reject(error);\n//   }\n// );\n// */"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,sCAAsC;;AAEtD;AACA,MAAMC,YAAY,GAAG,MAAM;EACzB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EAClD,OAAOF,KAAK,GAAGA,KAAK,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI;AAC1C,CAAC;;AAED;AACA,MAAMC,aAAa,GAAG,OAAO;EAC3BC,OAAO,EAAE;IACPC,MAAM,EAAE,kBAAkB;IAC1B,IAAIP,YAAY,EAAE,IAAI;MAAEQ,aAAa,EAAG,UAASR,YAAY,EAAG;IAAE,CAAC;EACrE;AACF,CAAC,CAAC;;AAEF;AACAF,KAAK,CAACW,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC7BD,QAAQ,IAAIA,QAAQ,EACpBE,KAAK,IAAI;EAAA;EACP,IAAI,oBAAAA,KAAK,CAACF,QAAQ,oDAAd,gBAAgBG,MAAM,MAAK,GAAG,EAAE;IAClCX,YAAY,CAACY,KAAK,EAAE;IACpBC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;EAC5B;EACA,OAAOC,OAAO,CAACC,MAAM,CAACP,KAAK,CAAC;AAC9B,CAAC,CACF;AAED,OAAO,MAAMQ,MAAM,GAAG,MAAOC,QAAQ,IAAK;EACxC,IAAI;IACF,MAAMX,QAAQ,GAAG,MAAMZ,KAAK,CAACwB,GAAG,CAAE,GAAEvB,OAAQ,GAAEsB,QAAS,EAAC,EAAEhB,aAAa,EAAE,CAAC;IAC1E,OAAOK,QAAQ,CAACa,IAAI;EACtB,CAAC,CAAC,OAAOX,KAAK,EAAE;IACdY,OAAO,CAACZ,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;IAClC,MAAMA,KAAK,CAAC,CAAC;EACf;AACF,CAAC;;AAED,OAAO,MAAMa,OAAO,GAAG,OAAOJ,QAAQ,EAAEE,IAAI,KAAK;EAC/C,IAAI;IACF,MAAMb,QAAQ,GAAG,MAAMZ,KAAK,CAAC4B,IAAI,CAC9B,GAAE3B,OAAQ,GAAEsB,QAAS,EAAC,EACvBE,IAAI,EACJlB,aAAa,EAAE,CAChB;IACD,OAAOK,QAAQ,CAACa,IAAI;EACtB,CAAC,CAAC,OAAOX,KAAK,EAAE;IACdY,OAAO,CAACZ,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;IACnC,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMe,oBAAoB,GAAG,OAAON,QAAQ,EAAEE,IAAI,KAAK;EAC5D,IAAI;IACF,MAAMb,QAAQ,GAAG,MAAMZ,KAAK,CAAC4B,IAAI,CAC9B,GAAE3B,OAAQ,GAAEsB,QAAS,EAAC,EACvBE,IAAI,EACJ;MACE,GAAGlB,aAAa,EAAE;MAClBC,OAAO,EAAE;QACP,GAAGD,aAAa,EAAE,CAACC,OAAO;QAC1BC,MAAM,EAAE;MACV;IACF,CAAC,CACF;IACD,OAAOG,QAAQ,CAACa,IAAI;EACtB,CAAC,CAAC,OAAOX,KAAK,EAAE;IACdY,OAAO,CAACZ,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;IACnC,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}