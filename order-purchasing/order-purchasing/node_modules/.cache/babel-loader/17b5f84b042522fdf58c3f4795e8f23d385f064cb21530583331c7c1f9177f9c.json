{"ast":null,"code":"import _regeneratorRuntime from\"D:/Javascript/React/order-purchasing/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Javascript/React/order-purchasing/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Javascript/React/order-purchasing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useMemo}from'react';import{Link}from\"react-router-dom\";import{Sidebar}from'primereact/sidebar';import{Button}from'primereact/button';import{useNavigate}from'react-router-dom';import{postApiv1,getApi}from'../../../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),menu=_useState2[0],setMenu=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),userName=_useState6[0],setUserName=_useState6[1];var navigate=useNavigate();useEffect(function(){var fetchMenu=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getApi(\"getMenuByUser\");case 3:result=_context.sent;setMenu(result.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Lỗi khi gọi API menu:\",_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchMenu(){return _ref.apply(this,arguments);};}();fetchMenu();setUserName(JSON.parse(localStorage.getItem('name')||'\"\"'));},[]);var handleLogout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return postApiv1(\"auth/logout\");case 3:localStorage.removeItem(\"access_token\");localStorage.removeItem(\"role\");localStorage.removeItem(\"department\");localStorage.removeItem(\"name\");navigate(\"/\");_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(\"Lỗi khi logout:\",_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return function handleLogout(){return _ref2.apply(this,arguments);};}();var _useMemo=useMemo(function(){var l1=[];var l2=[];menu.forEach(function(item){if(item.Parent===\"0\"){l1.push({Id:item.ID,Name:item.MenuName,Icon:item.Icon,TagCode:item.TagCode});}});menu.forEach(function(item){l1.forEach(function(item1){if(item.Parent===item1.Id){l2.push({Id:item.ID,Name:item.MenuName,Icon:item.Icon,Parent:item.Parent,TagCode:item.TagCode,TagName:item.TagName});}});});return{level1:l1,level2:l2};},[menu]),level1=_useMemo.level1,level2=_useMemo.level2;var getLevel=function getLevel(FrmCode){if(FrmCode===null){return/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-angle-down\"})]});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"nav\",children:[/*#__PURE__*/_jsx(Sidebar,{className:\"nav-header\",visible:visible,onHide:function onHide(){return setVisible(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-menu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/logoBitex.png\",width:\"100px\",height:\"100px\",alt:\"logo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"menu\",children:level1.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:item.Icon}),/*#__PURE__*/_jsx(Link,{to:item.TagCode,children:item.Name}),getLevel(item.TagCode),level2.map(function(item1,index1){if(item1.Parent===item.Id){return/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:item1.TagCode,children:item1.Name})})},index1);}else{return null;}})]},index);})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"otherOption\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-user\"}),userName]}),/*#__PURE__*/_jsxs(\"li\",{onClick:handleLogout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-right-to-bracket\"}),\"\\u0110\\u0103ng xu\\u1EA5t\"]})]})]})]})}),/*#__PURE__*/_jsx(Button,{style:styles.menu,icon:\"pi pi-bars\",onClick:function onClick(){return setVisible(true);},outlined:true})]});}export default Header;var styles={menu:{marginLeft:\"5px\"}};","map":{"version":3,"names":["useState","useEffect","useMemo","Link","Sidebar","Button","useNavigate","postApiv1","getApi","Header","menu","setMenu","visible","setVisible","userName","setUserName","navigate","fetchMenu","result","data","console","error","JSON","parse","localStorage","getItem","handleLogout","removeItem","l1","l2","forEach","item","Parent","push","Id","ID","Name","MenuName","Icon","TagCode","item1","TagName","level1","level2","getLevel","FrmCode","map","index","index1","styles","marginLeft"],"sources":["D:/Javascript/React/order-purchasing/src/components/Layout/Header/index.js"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { Sidebar } from 'primereact/sidebar';\r\nimport { Button } from 'primereact/button';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { postApiv1, getApi } from '../../../api';\r\n\r\nfunction Header() {\r\n  const [menu, setMenu] = useState([]);\r\n  const [visible, setVisible] = useState(false);\r\n  const [userName, setUserName] = useState();\r\n  const navigate = useNavigate();\r\n  \r\n  useEffect(() => {\r\n    const fetchMenu = async () => {\r\n      try {\r\n        const result = await getApi(\"getMenuByUser\");\r\n        setMenu(result.data);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi gọi API menu:\", error);\r\n      }\r\n    };\r\n    fetchMenu();\r\n    setUserName(JSON.parse(localStorage.getItem('name') || '\"\"'));\r\n  },[])\r\n  \r\n  const handleLogout = async () => {\r\n    try {\r\n      await postApiv1(\"auth/logout\");\r\n      localStorage.removeItem(\"access_token\");\r\n      localStorage.removeItem(\"role\");\r\n      localStorage.removeItem(\"department\");\r\n      localStorage.removeItem(\"name\");\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi logout:\", error);\r\n    }\r\n  };\r\n\r\n  const { level1, level2 } = useMemo(() => {\r\n    const l1 = [];\r\n    const l2 = [];\r\n\r\n    menu.forEach(item => {\r\n      if (item.Parent === \"0\") {\r\n        l1.push({ Id: item.ID, Name: item.MenuName, Icon: item.Icon, TagCode: item.TagCode });\r\n      }\r\n    });\r\n\r\n    menu.forEach(item => {\r\n      l1.forEach(item1 => {\r\n        if (item.Parent === item1.Id) {\r\n          l2.push({ Id: item.ID, Name: item.MenuName, Icon: item.Icon, Parent: item.Parent, TagCode: item.TagCode, TagName: item.TagName });\r\n        }\r\n      });\r\n    });\r\n\r\n    return { level1: l1, level2: l2 };\r\n  }, [menu]);\r\n\r\n  const getLevel = (FrmCode) => {\r\n    \r\n    if(FrmCode === null){\r\n      return (\r\n        <label>\r\n          <input type=\"checkbox\"/>\r\n          <i className=\"fa-solid fa-angle-down\"></i>\r\n        </label>\r\n        ) \r\n    }\r\n  }\r\n  \r\n  return ( \r\n    <div className=\"nav\">\r\n      <Sidebar className=\"nav-header\" visible={visible} onHide={() => setVisible(false)} >\r\n        <div className=\"nav-menu\">\r\n          <div className=\"logo\">\r\n            <img src=\"/img/logoBitex.png\" width=\"100px\" height=\"100px\" alt=\"logo\"/>\r\n          </div>\r\n          <div className=\"navbar\">\r\n            <ul className=\"menu\">\r\n            { /* menu */ } \r\n            { level1.map((item, index) => {\r\n                return (\r\n                  <li key={index}> <i className={ item.Icon }></i>\r\n                   <Link to={ item.TagCode }>\r\n                      { item.Name }\r\n                   </Link> \r\n                     { getLevel(item.TagCode) }\r\n                      { level2.map((item1, index1) => {\r\n                        if(item1.Parent === item.Id){\r\n                          return (\r\n                            <ul key={index1}>\r\n                                  <li><Link to={ item1.TagCode }>{ item1.Name }</Link></li>\r\n                             </ul>\r\n                          )\r\n                        }else { return null }\r\n                       }) \r\n                       }\r\n                  </li>\r\n                )\r\n            })}\r\n            { /* menu */ }\r\n            </ul>\r\n            <ul className=\"otherOption\">\r\n              <li><i className=\"fa-solid fa-user\"></i>{ userName }</li>\r\n              <li onClick = {handleLogout}><i className=\"fa-solid fa-right-to-bracket\"></i>Đăng xuất</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </Sidebar>\r\n      <Button style={styles.menu} icon=\"pi pi-bars\" onClick={() => setVisible(true)} outlined />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\nconst styles = {\r\n  menu:{ marginLeft: \"5px\" }\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}