{"ast":null,"code":"import _slicedToArray from\"D:/THANH/WedBitex/bitex-front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{memo,useState,useEffect,useRef}from'react';import{useSelector,useDispatch}from'react-redux';import*as ACTIONS from'../../store/actions/index';import{postApi}from'../../api';import{Panel}from'primereact/panel';import{Toast}from'primereact/toast';import{DataTable}from'primereact/datatable';import{Column}from'primereact/column';import{InputText}from'primereact/inputtext';import{Button}from'primereact/button';import{ScrollTop}from'primereact/scrolltop';import Modal from'./modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Staff(){var bill=useSelector(function(state){return state.bill;});var dispatch=useDispatch();var _useState=useState(),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),showImage=_useState4[0],setShowImage=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),globalFilter=_useState6[0],setGlobalFilter=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),modalEI=_useState8[0],setmodalEI=_useState8[1];var toast=useRef(null);var userCode=JSON.parse(localStorage.getItem('user'));useEffect(function(){var formData=new FormData();formData.append('user',\"THANHNGUYEN\");dispatch(ACTIONS.getBillByStaff(formData));},[dispatch]);var renderHeader=function renderHeader(){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-content-between\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"p-input-icon-left\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"pi pi-search\"}),/*#__PURE__*/_jsx(InputText,{style:styles.InputText,type:\"search\",onInput:function onInput(e){return setGlobalFilter(e.target.value);},placeholder:\"Search...\"})]})});};var header=renderHeader();var activityBodyTemplate=function activityBodyTemplate(rowData){return getSeverity(rowData.EI,rowData.Document,rowData.Status);};var getSeverity=function getSeverity(EI,Document,Status){switch(Status){case'0':return/*#__PURE__*/_jsx(Button,{type:\"button\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#ThongBao\",onClick:function onClick(){return handeShowModal(EI,Document);},icon:\"pi pi-truck\",rounded:true});case'1':return/*#__PURE__*/_jsx(\"i\",{className:\"pi pi-check\",style:{color:'slateblue'}});default:return\"\";}};var handeShowModal=function handeShowModal(EI,Document){setmodalEI({EI:EI,Document:Document});};var handeExit=function handeExit(){setImage('');setShowImage('');};var handeSaveImage=function handeSaveImage(){if(modalEI){if(image){var formData=new FormData();formData.append('image',image);formData.append('EI',modalEI.EI);formData.append('Document',modalEI.Document);formData.append('user',userCode);postApi(\"insertBillByStaff\",formData).then(function(result){var message=result.data[0].Mess;switch(message){case'0':return toast.current.show({severity:'warn',summary:'Warning',detail:\"H\\xF3a \\u0111\\u01A1n \".concat(modalEI.EI,\" \\u0111\\xE3 giao r\\u1ED3i\"),life:3000});case'1':return showSuccess(modalEI.EI);case'2':return toast.current.show({severity:'warn',summary:'Warning',detail:'User này không được phân quyền cho công việc này',life:3000});default:return\"\";}});setImage('');setShowImage('');}else{return toast.current.show({severity:'warn',summary:'Warning',detail:'Vui lòng chọn hình ảnh',life:3000});}}else{return toast.current.show({severity:'error',summary:'Error',detail:'Error',life:3000});}};var showSuccess=function showSuccess(EI){toast.current.show({severity:'success',summary:'Success',detail:\"H\\xF3a \\u0111\\u01A1n \".concat(EI,\" giao th\\xE0nh c\\xF4ng\"),life:3000});dispatch(ACTIONS.updateStatusBill(EI));};return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Panel,{style:styles.dataTable,header:\"Danh s\\xE1ch h\\xF3a \\u0111\\u01A1n giao h\\xE0ng\"}),/*#__PURE__*/_jsxs(DataTable,{value:bill,paginator:true,showGridlines:true,rows:200,globalFilter:globalFilter,header:header,emptyMessage:\"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u\",style:styles.dataTable,children:[/*#__PURE__*/_jsx(Column,{field:\"Number\",header:\"S\\u1ED1 h\\xF3a \\u0111\\u01A1n\",sortable:true,style:{width:'10%'}}),/*#__PURE__*/_jsx(Column,{field:\"Name\",header:\"T\\xEAn kh\\xE1ch h\\xE0ng\",sortable:true,style:{width:'80%'}}),/*#__PURE__*/_jsx(Column,{field:\"Status\",header:\"Tr\\u1EA1ng th\\xE1i\",sortable:true,body:activityBodyTemplate,style:{width:'10%'}})]}),/*#__PURE__*/_jsx(Modal,{handeSaveImage:handeSaveImage,handeExit:handeExit,image:image,setImage:setImage,showImage:showImage,setShowImage:setShowImage,modalEI:modalEI}),/*#__PURE__*/_jsx(Toast,{ref:toast}),/*#__PURE__*/_jsx(ScrollTop,{})]});}//  onSelectionChange={(e) => setSelectedProducts(e.value)}  selection={selectedProducts}\nexport default/*#__PURE__*/memo(Staff);var styles={title:{background:\"#062544\"},margin_top:{marginTop:\"10px\",fontFamily:\"Times New Roman\"},dataTable:{fontFamily:\"Times New Roman\"}};","map":{"version":3,"names":["memo","useState","useEffect","useRef","useSelector","useDispatch","ACTIONS","postApi","Panel","Toast","DataTable","Column","InputText","Button","ScrollTop","Modal","Staff","bill","state","dispatch","image","setImage","showImage","setShowImage","globalFilter","setGlobalFilter","modalEI","setmodalEI","toast","userCode","JSON","parse","localStorage","getItem","formData","FormData","append","getBillByStaff","renderHeader","styles","e","target","value","header","activityBodyTemplate","rowData","getSeverity","EI","Document","Status","handeShowModal","color","handeExit","handeSaveImage","then","result","message","data","Mess","current","show","severity","summary","detail","life","showSuccess","updateStatusBill","dataTable","width","title","background","margin_top","marginTop","fontFamily"],"sources":["D:/THANH/WedBitex/bitex-front-end/src/pages/Staff/index.js"],"sourcesContent":["import {  memo, useState, useEffect, useRef } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport * as ACTIONS from '../../store/actions/index';\r\nimport { postApi } from '../../api';\r\nimport { Panel } from 'primereact/panel';\r\nimport { Toast } from 'primereact/toast';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Button } from 'primereact/button';\r\nimport { ScrollTop } from 'primereact/scrolltop';\r\nimport Modal from './modal';\r\n\r\nfunction Staff() {\r\n  const bill = useSelector((state) => state.bill); \r\n  const dispatch = useDispatch();\r\n\r\n  const [image, setImage] = useState();\r\n  const [showImage, setShowImage] = useState();\r\n  const [globalFilter, setGlobalFilter] = useState(null);\r\n  const [modalEI, setmodalEI] = useState(null);\r\n  const toast = useRef(null);\r\n  \r\n  const userCode =  JSON.parse(localStorage.getItem('user'));\r\n  useEffect(() => {\r\n   let formData = new FormData(); \r\n   formData.append('user', \"THANHNGUYEN\");\r\n   dispatch(ACTIONS.getBillByStaff(formData)) \r\n  }, [dispatch])\r\n\r\n  const renderHeader = () => {\r\n   return (\r\n   <div className=\"flex justify-content-between\">\r\n       <span className=\"p-input-icon-left\">\r\n           <i className=\"pi pi-search\" />\r\n           <InputText style={styles.InputText} type=\"search\" onInput={(e) => setGlobalFilter(e.target.value)} placeholder=\"Search...\" />\r\n       </span>\r\n   </div>\r\n   );\r\n};\r\n\r\nconst header = renderHeader();\r\n\r\nconst activityBodyTemplate = (rowData) => {\r\n return getSeverity(rowData.EI, rowData.Document, rowData.Status)\r\n};\r\n\r\nconst getSeverity = (EI, Document, Status) => {\r\n switch (Status) {\r\n     case '0':\r\n         return <Button type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#ThongBao\" onClick={()=>handeShowModal(EI, Document)} icon=\"pi pi-truck\" rounded></Button>; \r\n     case '1':\r\n         return <i className=\"pi pi-check\" style={{ color: 'slateblue' }}></i>; \r\n     default:\r\n         return \"\";\r\n }\r\n};\r\n const handeShowModal = (EI, Document) =>{\r\n  setmodalEI({EI, Document});\r\n }\r\n\r\n  const handeExit = () => {\r\n    setImage('')\r\n    setShowImage('')\r\n  }\r\n  const handeSaveImage = () => {\r\n    if(modalEI){\r\n      if(image){\r\n         let formData = new FormData();\r\n         formData.append('image', image);\r\n         formData.append('EI', modalEI.EI);\r\n         formData.append('Document', modalEI.Document);\r\n         formData.append('user', userCode);\r\n         \r\n         postApi(\"insertBillByStaff\", formData).then((result) =>{\r\n          let message = result.data[0].Mess;\r\n          switch (message) {\r\n              case '0':\r\n                  return toast.current.show({severity:'warn', summary: 'Warning', detail:`Hóa đơn ${modalEI.EI} đã giao rồi`, life: 3000});\r\n              case '1':\r\n                   return showSuccess(modalEI.EI);\r\n              case '2':\r\n                  return toast.current.show({severity:'warn', summary: 'Warning', detail:'User này không được phân quyền cho công việc này', life: 3000});\r\n              default:\r\n                  return \"\";\r\n          }\r\n      })\r\n         setImage('')\r\n         setShowImage('')\r\n       }else{  return toast.current.show({severity:'warn', summary: 'Warning', detail:'Vui lòng chọn hình ảnh', life: 3000}); }\r\n     }else{  return toast.current.show({severity:'error', summary: 'Error', detail:'Error', life: 3000}); }\r\n   }\r\n\r\n   const showSuccess = (EI) => {\r\n    toast.current.show({severity:'success', summary: 'Success', detail:`Hóa đơn ${EI} giao thành công`, life: 3000});\r\n    dispatch(ACTIONS.updateStatusBill(EI));\r\n   }\r\n    return ( \r\n    <div className=\"row\">\r\n        <Panel style={styles.dataTable} header=\"Danh sách hóa đơn giao hàng\">\r\n        </Panel>\r\n        <DataTable value={bill} paginator showGridlines rows={200} \r\n                           globalFilter={globalFilter} header={header}\r\n                           emptyMessage=\"Không có dữ liệu\" style={styles.dataTable}>\r\n            <Column field=\"Number\" header=\"Số hóa đơn\" sortable style={{ width: '10%' }}></Column>\r\n            <Column field=\"Name\" header=\"Tên khách hàng\" sortable style={{ width: '80%' }}></Column>\r\n            <Column field=\"Status\" header=\"Trạng thái\" sortable body={activityBodyTemplate} style={{ width: '10%' }}></Column>\r\n        </DataTable>\r\n        <Modal handeSaveImage = { handeSaveImage } handeExit = { handeExit }\r\n                      image = { image } setImage = { setImage }\r\n                      showImage = { showImage } setShowImage = { setShowImage } modalEI = { modalEI }/>\r\n        <Toast ref={toast} />\r\n        <ScrollTop />\r\n    </div>\r\n    );\r\n}\r\n//  onSelectionChange={(e) => setSelectedProducts(e.value)}  selection={selectedProducts}\r\nexport default memo(Staff);\r\n\r\nconst styles = {\r\n    title:{ background: \"#062544\" },\r\n    margin_top:{ marginTop:\"10px\", fontFamily:\"Times New Roman\" },\r\n    dataTable:{  fontFamily:\"Times New Roman\" }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}