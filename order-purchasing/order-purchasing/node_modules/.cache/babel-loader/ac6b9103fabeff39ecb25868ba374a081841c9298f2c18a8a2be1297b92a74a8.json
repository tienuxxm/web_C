{"ast":null,"code":"var _jsxFileName = \"E:\\\\WebBitex\\\\order-purchasing\\\\src\\\\components\\\\Layout\\\\Header\\\\index.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useMemo } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Sidebar } from 'primereact/sidebar';\nimport { Button } from 'primereact/button';\nimport { useNavigate } from 'react-router-dom';\nimport { postApiv1, getApi } from '../../../api';\nimport * as ACTIONS from '../../../store/actions/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Header() {\n  _s();\n  var _user$0$name, _user$;\n  const user = useSelector(state => state.user);\n  const [menu, setMenu] = useState([]);\n  const [visible, setVisible] = useState(false);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const fetchMenu = async () => {\n      try {\n        const result = await getApi(\"getMenuByUser\");\n        setMenu(result.data);\n      } catch (error) {\n        console.error(\"Lỗi khi gọi API menu:\", error);\n      }\n    };\n    fetchMenu();\n  }, []);\n  console.log(user);\n  useEffect(() => {\n    dispatch(ACTIONS.getUser());\n  }, [dispatch]);\n  const handleLogout = async () => {\n    try {\n      await postApiv1(\"auth/logout\");\n      localStorage.removeItem(\"access_token\");\n      navigate(\"/\");\n    } catch (error) {\n      console.error(\"Lỗi khi logout:\", error);\n    }\n  };\n  const {\n    level1,\n    level2\n  } = useMemo(() => {\n    const l1 = [];\n    const l2 = [];\n    menu.forEach(item => {\n      if (item.Parent === \"0\") {\n        l1.push({\n          Id: item.ID,\n          Name: item.MenuName,\n          Icon: item.Icon,\n          TagCode: item.TagCode\n        });\n      }\n    });\n    menu.forEach(item => {\n      l1.forEach(item1 => {\n        if (item.Parent === item1.Id) {\n          l2.push({\n            Id: item.ID,\n            Name: item.MenuName,\n            Icon: item.Icon,\n            Parent: item.Parent,\n            TagCode: item.TagCode,\n            TagName: item.TagName\n          });\n        }\n      });\n    });\n    return {\n      level1: l1,\n      level2: l2\n    };\n  }, [menu]);\n  const getLevel = FrmCode => {\n    if (FrmCode === null) {\n      return /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa-solid fa-angle-down\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"nav\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      className: \"nav-header\",\n      visible: visible,\n      onHide: () => setVisible(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav-menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/img/logoBitex.png\",\n            width: \"100px\",\n            height: \"100px\",\n            alt: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"navbar\",\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"menu\",\n            children: level1.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: item.Icon\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 36\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: item.TagCode,\n                  children: item.Name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 20\n                }, this), getLevel(item.TagCode), level2.map((item1, index1) => {\n                  if (item1.Parent === item.Id) {\n                    return /*#__PURE__*/_jsxDEV(\"ul\", {\n                      children: /*#__PURE__*/_jsxDEV(\"li\", {\n                        children: /*#__PURE__*/_jsxDEV(Link, {\n                          to: item1.TagCode,\n                          children: item1.Name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 98,\n                          columnNumber: 39\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 98,\n                        columnNumber: 35\n                      }, this)\n                    }, index1, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 97,\n                      columnNumber: 29\n                    }, this);\n                  } else {\n                    return null;\n                  }\n                })]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"otherOption\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa-solid fa-user\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 19\n              }, this), (_user$0$name = user === null || user === void 0 ? void 0 : (_user$ = user[0]) === null || _user$ === void 0 ? void 0 : _user$.name) !== null && _user$0$name !== void 0 ? _user$0$name : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: handleLogout,\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa-solid fa-right-to-bracket\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 44\n              }, this), \"\\u0110\\u0103ng xu\\u1EA5t\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      style: styles.menu,\n      icon: \"pi pi-bars\",\n      onClick: () => setVisible(true),\n      outlined: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(Header, \"azIS8cNxsAC3MO7spyj48ZVB2Jg=\", false, function () {\n  return [useSelector, useNavigate, useDispatch];\n});\n_c = Header;\nexport default Header;\nconst styles = {\n  menu: {\n    marginLeft: \"5px\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["useState","useEffect","useMemo","Link","useSelector","useDispatch","Sidebar","Button","useNavigate","postApiv1","getApi","ACTIONS","Header","user","state","menu","setMenu","visible","setVisible","navigate","dispatch","fetchMenu","result","data","error","console","log","getUser","handleLogout","localStorage","removeItem","level1","level2","l1","l2","forEach","item","Parent","push","Id","ID","Name","MenuName","Icon","TagCode","item1","TagName","getLevel","FrmCode","map","index","index1","name","styles","marginLeft"],"sources":["E:/WebBitex/order-purchasing/src/components/Layout/Header/index.js"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Sidebar } from 'primereact/sidebar';\r\nimport { Button } from 'primereact/button';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { postApiv1, getApi } from '../../../api';\r\nimport * as ACTIONS from '../../../store/actions/index';\r\n\r\nfunction Header() {\r\n  const user = useSelector((state) => state.user); \r\n  const [menu, setMenu] = useState([]);\r\n  const [visible, setVisible] = useState(false);\r\n  const navigate = useNavigate();\r\n  \r\n  const dispatch = useDispatch();\r\n  \r\n  useEffect(() => {\r\n    const fetchMenu = async () => {\r\n      try {\r\n        const result = await getApi(\"getMenuByUser\");\r\n        setMenu(result.data);\r\n      } catch (error) {\r\n        console.error(\"Lỗi khi gọi API menu:\", error);\r\n      }\r\n    };\r\n\r\n    fetchMenu();\r\n  },[])\r\n  console.log(user);\r\n  useEffect(() => {\r\n    dispatch(ACTIONS.getUser())\r\n  },[dispatch])\r\n \r\n  const handleLogout = async () => {\r\n    try {\r\n      await postApiv1(\"auth/logout\");\r\n      localStorage.removeItem(\"access_token\");\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi logout:\", error);\r\n    }\r\n  };\r\n\r\n  const { level1, level2 } = useMemo(() => {\r\n    const l1 = [];\r\n    const l2 = [];\r\n\r\n    menu.forEach(item => {\r\n      if (item.Parent === \"0\") {\r\n        l1.push({ Id: item.ID, Name: item.MenuName, Icon: item.Icon, TagCode: item.TagCode });\r\n      }\r\n    });\r\n\r\n    menu.forEach(item => {\r\n      l1.forEach(item1 => {\r\n        if (item.Parent === item1.Id) {\r\n          l2.push({ Id: item.ID, Name: item.MenuName, Icon: item.Icon, Parent: item.Parent, TagCode: item.TagCode, TagName: item.TagName });\r\n        }\r\n      });\r\n    });\r\n\r\n    return { level1: l1, level2: l2 };\r\n  }, [menu]);\r\n\r\n  const getLevel = (FrmCode) => {\r\n    if(FrmCode === null){\r\n      return (\r\n        <label>\r\n          <input type=\"checkbox\"/>\r\n          <i className=\"fa-solid fa-angle-down\"></i>\r\n        </label>\r\n        ) \r\n    }\r\n  }\r\n  \r\n  return ( \r\n    <div className=\"nav\">\r\n      <Sidebar className=\"nav-header\" visible={visible} onHide={() => setVisible(false)} >\r\n        <div className=\"nav-menu\">\r\n          <div className=\"logo\">\r\n            <img src=\"/img/logoBitex.png\" width=\"100px\" height=\"100px\" alt=\"logo\"/>\r\n          </div>\r\n          <div className=\"navbar\">\r\n            <ul className=\"menu\">\r\n            { /* menu */ } \r\n            { level1.map((item, index) => {\r\n                return (\r\n                  <li key={index}> <i className={ item.Icon }></i>\r\n                   <Link to={ item.TagCode }>\r\n                      { item.Name }\r\n                   </Link> \r\n                     { getLevel(item.TagCode) }\r\n                      { level2.map((item1, index1) => {\r\n                        if(item1.Parent === item.Id){\r\n                          return (\r\n                            <ul key={index1}>\r\n                                  <li><Link to={ item1.TagCode }>{ item1.Name }</Link></li>\r\n                             </ul>\r\n                          )\r\n                        }else { return null }\r\n                       }) \r\n                       }\r\n                  </li>\r\n                )\r\n            })}\r\n            { /* menu */ }\r\n            </ul>\r\n            <ul className=\"otherOption\">\r\n              <li><i className=\"fa-solid fa-user\"></i>{ user?.[0]?.name ?? \"\" }</li>\r\n              <li onClick = {handleLogout}><i className=\"fa-solid fa-right-to-bracket\"></i>Đăng xuất</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </Sidebar>\r\n      <Button style={styles.menu} icon=\"pi pi-bars\" onClick={() => setVisible(true)} outlined />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\nconst styles = {\r\n  menu:{ marginLeft: \"5px\" }\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}