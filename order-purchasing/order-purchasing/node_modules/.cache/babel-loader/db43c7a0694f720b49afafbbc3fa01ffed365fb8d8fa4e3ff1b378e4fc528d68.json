{"ast":null,"code":"import _defineProperty from\"E:/WebBitex/order-purchasing/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"E:/WebBitex/order-purchasing/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/WebBitex/order-purchasing/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,memo,useRef}from'react';import{useNavigate}from'react-router-dom';import{postApi}from'../../api';import{Toast}from'primereact/toast';import{InputText}from\"primereact/inputtext\";import{Password}from'primereact/password';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var navigate=useNavigate();var toast=useRef(null);var handleChange=function handleChange(event){var name=event.target.name;var value=event.target.value;setInputs(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},name,value));});};var showError=function showError(){toast.current.show({severity:'error',summary:'Error',detail:'Đăng nhập thất bại!',life:3000});};var handleSubmit=function handleSubmit(event){event.preventDefault();var formData=new FormData();formData.append('email',inputs.email);formData.append('password',inputs.password);postApi(\"auth/login\",formData).then(function(result){if(result.access_token===0){showError();}else{localStorage.setItem('access_token',JSON.stringify(result.access_token));navigate(\"/home\");navigate(0);}});};return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"img/logoBitex.png\",alt:\"Logo\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"span\",{className:\"p-float-label\",children:[/*#__PURE__*/_jsx(InputText,{id:\"email\",type:\"email\",onChange:handleChange,name:\"email\",value:inputs.email||\"\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"T\\xEAn \\u0111\\u0103ng nh\\u1EADp\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"p-float-label\",children:[/*#__PURE__*/_jsx(Password,{id:\"password\",type:\"password\",onChange:handleChange,name:\"password\",value:inputs.password||\"\",toggleMask:true,feedback:false,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"M\\u1EADt kh\\u1EA9u\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"\\u0110\\u0103ng nh\\u1EADp\"})]}),/*#__PURE__*/_jsx(Toast,{ref:toast})]})});}export default/*#__PURE__*/memo(Login);","map":{"version":3,"names":["useState","memo","useRef","useNavigate","postApi","Toast","InputText","Password","Login","inputs","setInputs","navigate","toast","handleChange","event","name","target","value","values","showError","current","show","severity","summary","detail","life","handleSubmit","preventDefault","formData","FormData","append","email","password","then","result","access_token","localStorage","setItem","JSON","stringify"],"sources":["E:/WebBitex/order-purchasing/src/pages/Login/index.js"],"sourcesContent":["import { useState, memo, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { postApi } from '../../api';\r\nimport { Toast } from 'primereact/toast';\r\nimport { InputText } from \"primereact/inputtext\";\r\nimport { Password } from 'primereact/password';\r\n\r\nfunction Login() {\r\n  const [inputs, setInputs] = useState({});\r\n  const navigate = useNavigate();\r\n  const toast = useRef(null);\r\n  \r\n  const handleChange = (event) => {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n    setInputs(values => ({...values, [name]: value}));\r\n  }\r\n\r\n  const showError = () => {\r\n    toast.current.show({severity:'error', summary: 'Error', detail:'Đăng nhập thất bại!', life: 3000});\r\n  }\r\n  \r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    let formData = new FormData(); \r\n    formData.append('email', inputs.email);\r\n    formData.append('password', inputs.password);\r\n  \r\n    postApi(\"auth/login\", formData).then((result) =>{\r\n      if(result.access_token === 0){\r\n        showError();\r\n      }else{\r\n        localStorage.setItem('access_token', JSON.stringify(result.access_token));\r\n        navigate(\"/home\");\r\n        navigate(0);\r\n      }\r\n     })\r\n  }\r\n\r\n\r\n return ( \r\n  <div className=\"login\">\r\n     <div className=\"login-box\">\r\n          <div className=\"logo\">\r\n             <img src=\"img/logoBitex.png\" alt=\"Logo\" />\r\n          </div>\r\n          <form onSubmit={handleSubmit}>\r\n          <span className=\"p-float-label\">\r\n                <InputText id=\"email\" type=\"email\" onChange={handleChange} name=\"email\" value={inputs.email || \"\"}  required />\r\n                <label htmlFor=\"email\">Tên đăng nhập</label>\r\n          </span>\r\n          <span className=\"p-float-label\">\r\n              <Password  id=\"password\" type=\"password\" onChange={handleChange} name=\"password\" value={inputs.password || \"\"} toggleMask  feedback={false} required />\r\n              <label htmlFor=\"password\">Mật khẩu</label>\r\n          </span>\r\n            <input type=\"submit\" value=\"Đăng nhập\"  />\r\n      </form>\r\n      <Toast ref={toast} />\r\n     </div>\r\n   </div>\r\n   \r\n );\r\n}\r\n\r\nexport default memo(Login);\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}